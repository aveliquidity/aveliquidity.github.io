System.register(["./index-legacy-BIw6wWtP.js"],(function(e,t){"use strict";var n,o,s,a,r,c,d,i,l,u,h,w,f,m;return{setters:[e=>{n=e.u,o=e.d,s=e.a,a=e.c,r=e.w,c=e.o,d=e.r,i=e.b,l=e.e,u=e.f,h=e.g,w=e.h,f=e.K,m=e.i}],execute:function(){function t(e){let t=n();t.accounts=e;let o=t.walletAddress;0===e.length?t.disconnect():e[0]!==o&&(t.setWalletAddress(e[0]),window.location.reload())}function g(){return new Promise(((e,o)=>{let{ethereum:s}=window,a=n();s?.request?.({method:"eth_requestAccounts"}).then((r=>{if(s?.chainId?a.setChainId(s?.chainId):s?.request?.({method:"eth_chainId"}).then((e=>{"string"!=typeof e&&"number"!=typeof e||a.setChainId(e)})),Array.isArray(r)){a.accounts=r,a.setProvider(s),a.setWallet("MetaMask");let c=a.walletAddress;if(0===r.length)return void o("please connect MetaMask");r[0]!==c&&(a.setWalletAddress(r[0]),function(){let{ethereum:e}=window,o=n();e&&(e.on("chainChanged",(e=>{o.setChainId(e),window.location.reload()})),e.on("accountsChanged",t),e.on("disconnect",(()=>{o.disconnect()})))}()),e(!0)}})).catch((e=>{4001===e.code?o("请连接MetaMask"):console.error(e)}))}))}const y=o({async beforeRouteEnter(e,t,n){window?.trustwallet?.solana&&!window.ethereum?.address?.startsWith?.("0x")&&window.ethereum.address?(await h().catch((async()=>!1)),n()):window?.ethereum?(await g().catch((async()=>!1)),n()):n()}});e("default",o({...y,__name:"index",setup(e){const t=s();n();let o=a((()=>w().aToken));return r(o,(e=>{e&&(console.log(e),t.go(0))})),c((()=>{})),(e,t)=>{const n=d("router-view");return i(),l(n,null,{default:u((({Component:e})=>[(i(),l(f,null,[(i(),l(m(e)))],1024))])),_:1})}}}))}}}));
